webpackJsonp([1],{"3uhJ":function(A,t){},Cz6C:function(A,t){},Jic8:function(A,t){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkwAAACKCAYAAABYShVDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAGYktHRAD/AP8A/6C9p5MAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMDoxMDowNSAyMjowMDo1Mlj6g4oAAAFSSURBVHhe7cExAQAAAMKg9U9tDQ8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4VAP0pgABXgq3KAAAAABJRU5ErkJggg=="},Lrbi:function(A,t){},NHnr:function(A,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("UIRh");var n=e("uOA4"),a=e.n(n),i=(e("jayP"),e("QKkm")),o=e.n(i),s=(e("y+mr"),e("3JdW")),r=e.n(s),c=(e("XDqQ"),e("Axha")),d=e.n(c),l=(e("Cz6C"),e("dU8H")),m=e.n(l),u=(e("Lrbi"),e("aMxQ")),v=e.n(u),f=e("7+uW"),g={props:["inputImg","setImg","selecteNav","setimgName"],methods:{handleInput:function(A){var t=this,e=A.target.files;this.setimgName(e[0].name);var n=new FileReader;n.readAsDataURL(e[0]),n.onload=function(A){t.setImg(A.target.result),t.selecteNav("2")}}}},h={render:function(){var A=this.$createElement,t=this._self._c||A;return t("div",[t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:this.handleInput}}),this._v(" "),t("label",{staticClass:"btn btn-light",attrs:{for:"file"}},[this._v("点我选择图片")]),this._v(" "),t("p",[this._v("选好后自动跳转到位置选择页面.")]),this._v(" "),t("img",{staticClass:"card-img-bottom",attrs:{src:this.inputImg,alt:"preview"}})])},staticRenderFns:[]};var p=e("VU/8")(g,h,!1,function(A){e("vjWo")},null,null).exports,I=e("Milw"),M=e.n(I),_=3.141592653589793,b=6378245,N=.006693421622965943;function S(A,t){if(function(A,t){return A<72.004||A>137.8347||t<.8293||t>55.8271||!1}(A,t))return[A,t];var e=function(A,t){var e=2*A-100+3*t+.2*t*t+.1*A*t+.2*Math.sqrt(Math.abs(A));return e+=2*(20*Math.sin(6*A*_)+20*Math.sin(2*A*_))/3,e+=2*(20*Math.sin(t*_)+40*Math.sin(t/3*_))/3,e+=2*(160*Math.sin(t/12*_)+320*Math.sin(t*_/30))/3}(A-105,t-35),n=function(A,t){var e=300+A+2*t+.1*A*A+.1*A*t+.1*Math.sqrt(Math.abs(A));return e+=2*(20*Math.sin(6*A*_)+20*Math.sin(2*A*_))/3,e+=2*(20*Math.sin(A*_)+40*Math.sin(A/3*_))/3,e+=2*(150*Math.sin(A/12*_)+300*Math.sin(A/30*_))/3}(A-105,t-35),a=t/180*_,i=Math.sin(a);i=1-N*i*i;var o=Math.sqrt(i);return e=180*e/(b*(1-N)/(i*o)*_),[2*A-(A+(n=180*n/(b/o*Math.cos(a)*_))),2*t-(t+e)]}var C=e("mvHQ"),w=e.n(C),P=e("DkUT"),U=e.n(P);var x={props:["selecteNav","setCoordinate","convertedCoordinate","inputImg","setModifiedImg"],data:function(){return{address:""}},methods:{handleClick:function(){var A=this.inputImg,t=this.convertedCoordinate,e=this.setModifiedImg,n=this.selecteNav;e(function(A,t){var e=U.a.load(A);console.log("oldExifObj:"),console.log(e);var n=t[0],a=t[1],i=JSON.parse(w()(e));i.GPS[U.a.GPSIFD.GPSLatitudeRef]=a<0?"S":"N",i.GPS[U.a.GPSIFD.GPSLatitude]=U.a.GPSHelper.degToDmsRational(a),i.GPS[U.a.GPSIFD.GPSLongitudeRef]=n<0?"W":"E",i.GPS[U.a.GPSIFD.GPSLongitude]=U.a.GPSHelper.degToDmsRational(n);var o=U.a.dump(i),s=U.a.insert(o,A),r=U.a.load(s);return console.log("newExifObj"),console.log(r),s}(A,t)),n("3")}},mounted:function(){var A=this;M.a.load({key:"9c5c51916fc0a4e7e2cf745fb39ffe2c",version:"1.4.15",plugins:[],AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}}).then(function(t){new t.Map("container");AMapUI.loadUI(["misc/PositionPicker"],function(e){var n=new e({mode:"dragMap",map:new t.Map("container",{zoom:16})});n.on("success",function(t){var e=t.position,n=e.lng,a=e.lat;A.address=t.address,A.setCoordinate(S(n,a))}),n.start()})}).catch(function(A){console.log(A)})}},D={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",[e("a",{staticClass:"btn btn-light",attrs:{href:"javascript:;"},on:{click:A.handleClick}},[A._v("使用当前位置")]),A._v(" "),e("p",[A._v("点击后将跳转到完成页面")]),A._v(" "),e("div",{attrs:{id:"container"}}),A._v(" "),e("p",{staticClass:"card-text"},[A._v(A._s(A.address))])])},staticRenderFns:[]};var R={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",[e("div",{directives:[{name:"show",rawName:"v-show",value:!A.modifiedImg,expression:"!modifiedImg"}]},[e("p",[A._v("编辑还未完成")])]),A._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:A.modifiedImg,expression:"modifiedImg"}]},[e("a",{staticClass:"btn btn-light",attrs:{href:A.modifiedImg,download:A.imgName}},[A._v("已完成,点我下载")]),A._v(" "),e("a",{staticClass:"btn btn-light",on:{click:A.backToStart}},[A._v("或者,再来一张")]),A._v(" "),e("img",{staticClass:"card-img-bottom",attrs:{src:A.modifiedImg,alt:"modifiedImg"}})])])},staticRenderFns:[]};var y={data:function(){return{inputImg:e("Jic8"),imgName:"",modifiedImg:"",selected:"1",convertedCoordinate:[]}},components:{SelectImg:p,SelectPosition:e("VU/8")(x,D,!1,function(A){e("3uhJ")},null,null).exports,Download:e("VU/8")({props:["modifiedImg","imgName","selecteNav"],methods:{backToStart:function(){this.selecteNav("1")}}},R,!1,function(A){e("ryUf")},null,null).exports},methods:{setImg:function(A){this.inputImg=A},selecteNav:function(A){this.selected=A},setCoordinate:function(A){this.convertedCoordinate=A},setModifiedImg:function(A){this.modifiedImg=A},setimgName:function(A){this.imgName=A}}},G={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",[e("mt-navbar",{model:{value:A.selected,callback:function(t){A.selected=t},expression:"selected"}},[e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"1"}},[e("h6",[A._v("1 选照片")])]),A._v(" "),e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"2"}},[e("h6",[A._v("2 选地点")])]),A._v(" "),e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"3"}},[e("h6",[A._v("3 下载成果")])])],1),A._v(" "),e("mt-tab-container",{model:{value:A.selected,callback:function(t){A.selected=t},expression:"selected"}},[e("mt-tab-container-item",{attrs:{id:"1"}},[e("br"),A._v(" "),e("SelectImg",{attrs:{inputImg:A.inputImg,setImg:A.setImg,selecteNav:A.selecteNav,setimgName:A.setimgName}})],1),A._v(" "),e("mt-tab-container-item",{attrs:{id:"2"}},[e("br"),A._v(" "),e("SelectPosition",{attrs:{setCoordinate:A.setCoordinate,selecteNav:A.selecteNav,convertedCoordinate:A.convertedCoordinate,inputImg:A.inputImg,setModifiedImg:A.setModifiedImg}})],1),A._v(" "),e("mt-tab-container-item",{attrs:{id:"3"}},[e("br"),A._v(" "),e("Download",{attrs:{modifiedImg:A.modifiedImg,imgName:A.imgName,selecteNav:A.selecteNav}})],1)],1)],1)},staticRenderFns:[]};var k=e("VU/8")(y,G,!1,function(A){e("nvrs")},null,null).exports;f.default.component(v.a.name,v.a),f.default.component(m.a.name,m.a),f.default.component(d.a.name,d.a),f.default.component(r.a.name,r.a),f.default.component(o.a.name,o.a),f.default.component(a.a.name,a.a),new f.default({el:"#app",components:{App:k},template:"<App/>"})},UIRh:function(A,t){},XDqQ:function(A,t){},jayP:function(A,t){},joTY:function(A,t){},nvrs:function(A,t){},ryUf:function(A,t){},vjWo:function(A,t){},"y+mr":function(A,t){}},["NHnr"]);
//# sourceMappingURL=app.cc00439fe2ad27532c65.js.map