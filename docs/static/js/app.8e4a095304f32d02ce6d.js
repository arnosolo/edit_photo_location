webpackJsonp([1],{"0dUj":function(A,t){},"5++W":function(A,t){},Cz6C:function(A,t){},HhZY:function(A,t){},Jic8:function(A,t){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkwAAACKCAYAAABYShVDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAGYktHRAD/AP8A/6C9p5MAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMDoxMDowNSAyMjowMDo1Mlj6g4oAAAFSSURBVHhe7cExAQAAAMKg9U9tDQ8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4VAP0pgABXgq3KAAAAABJRU5ErkJggg=="},Lrbi:function(A,t){},NHnr:function(A,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("UIRh");var n=e("uOA4"),a=e.n(n),i=(e("jayP"),e("QKkm")),s=e.n(i),o=(e("y+mr"),e("3JdW")),r=e.n(o),c=(e("XDqQ"),e("Axha")),d=e.n(c),l=(e("Cz6C"),e("dU8H")),m=e.n(l),u=(e("Lrbi"),e("aMxQ")),v=e.n(u),f=(e("0dUj"),e("IqSH")),h=e.n(f),p=(e("swY8"),e("gAYL")),g=e.n(p),_=e("7+uW"),b={props:["inputImg","setImg","selecteNav","setimgName"],methods:{handleInput:function(A){var t=this,e=A.target.files;this.setimgName(e[0].name);var n=new FileReader;n.readAsDataURL(e[0]),n.onload=function(A){t.setImg(A.target.result),t.selecteNav("2")}}}},I={render:function(){var A=this.$createElement,t=this._self._c||A;return t("div",{staticClass:"box"},[t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:this.handleInput}}),this._v(" "),t("label",{staticClass:"btn btn-light",attrs:{for:"file"}},[this._v("点我选择图片")]),this._v(" "),t("p",[this._v("选好后自动跳转到位置选择页面.")]),this._v(" "),t("img",{staticClass:"preview rounded mx-auto d-block",attrs:{src:this.inputImg,alt:"preview"}})])},staticRenderFns:[]};var w=e("VU/8")(b,I,!1,function(A){e("HhZY")},null,null).exports,M=e("Milw"),S=e.n(M),N=3.141592653589793,C=6378245,x=.006693421622965943;function P(A,t){if(function(A,t){return A<72.004||A>137.8347||t<.8293||t>55.8271||!1}(A,t))return[A,t];var e=function(A,t){var e=2*A-100+3*t+.2*t*t+.1*A*t+.2*Math.sqrt(Math.abs(A));return e+=2*(20*Math.sin(6*A*N)+20*Math.sin(2*A*N))/3,e+=2*(20*Math.sin(t*N)+40*Math.sin(t/3*N))/3,e+=2*(160*Math.sin(t/12*N)+320*Math.sin(t*N/30))/3}(A-105,t-35),n=function(A,t){var e=300+A+2*t+.1*A*A+.1*A*t+.1*Math.sqrt(Math.abs(A));return e+=2*(20*Math.sin(6*A*N)+20*Math.sin(2*A*N))/3,e+=2*(20*Math.sin(A*N)+40*Math.sin(A/3*N))/3,e+=2*(150*Math.sin(A/12*N)+300*Math.sin(A/30*N))/3}(A-105,t-35),a=t/180*N,i=Math.sin(a);i=1-x*i*i;var s=Math.sqrt(i);return e=180*e/(C*(1-x)/(i*s)*N),[2*A-(A+(n=180*n/(C/s*Math.cos(a)*N))),2*t-(t+e)]}var k=e("mvHQ"),U=e.n(k),D=e("DkUT"),R=e.n(D);var G={props:["selecteNav","setCoordinate","convertedCoordinate","inputImg","setModifiedImg"],data:function(){return{address:""}},methods:{handleClick:function(){var A=this.inputImg,t=this.convertedCoordinate,e=this.setModifiedImg,n=this.selecteNav;e(function(A,t){var e=R.a.load(A);console.log("oldExifObj:"),console.log(e);var n=t[0],a=t[1],i=JSON.parse(U()(e));i.GPS[R.a.GPSIFD.GPSLatitudeRef]=a<0?"S":"N",i.GPS[R.a.GPSIFD.GPSLatitude]=R.a.GPSHelper.degToDmsRational(a),i.GPS[R.a.GPSIFD.GPSLongitudeRef]=n<0?"W":"E",i.GPS[R.a.GPSIFD.GPSLongitude]=R.a.GPSHelper.degToDmsRational(n);var s=R.a.dump(i),o=R.a.insert(s,A),r=R.a.load(o);return console.log("newExifObj"),console.log(r),o}(A,t)),n("3")},backToStart:function(){this.selecteNav("1")}},mounted:function(){var A=this;S.a.load({key:"9c5c51916fc0a4e7e2cf745fb39ffe2c",version:"1.4.15",plugins:[],AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}}).then(function(t){new t.Map("container");AMapUI.loadUI(["misc/PositionPicker"],function(e){var n=new e({mode:"dragMap",map:new t.Map("container",{zoom:16})});n.on("success",function(t){var e=t.position,n=e.lng,a=e.lat;A.address=t.address,A.setCoordinate(P(n,a))}),n.start()})}).catch(function(A){console.log(A)})}},y={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",{staticClass:"box"},[e("a",{staticClass:"btn btn-light",attrs:{href:"javascript:;"},on:{click:A.handleClick}},[A._v("使用当前位置")]),A._v(" "),e("a",{staticClass:"btn btn-light",on:{click:A.backToStart}},[A._v("重选照片")]),A._v(" "),e("p",[A._v("点击后将跳转到完成页面")]),A._v(" "),e("div",{attrs:{id:"container"}}),A._v(" "),e("p",{staticClass:"card-text"},[A._v(A._s(A.address))])])},staticRenderFns:[]};var j={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",{staticClass:"box"},[A.modifiedImg?e("div",[e("p",[A._v("以为照片添加位置信息")])]):e("div",[e("p",[A._v("编辑还未完成")])]),A._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:A.modifiedImg,expression:"modifiedImg"}]},[e("a",{staticClass:"btn btn-light",attrs:{href:A.modifiedImg,download:A.imgName}},[A._v("点我下载")]),A._v(" "),e("a",{staticClass:"btn btn-light",on:{click:A.backToStart}},[A._v("再来一张")]),A._v(" "),e("img",{staticClass:"preview rounded mx-auto d-block",attrs:{src:A.modifiedImg,alt:"modifiedImg"}}),A._v(" "),e("br"),A._v(" "),e("a",{staticClass:"btn btn-light",attrs:{href:A.mailto}},[A._v("联系作者")])])])},staticRenderFns:[]};var E={data:function(){return{inputImg:e("Jic8"),imgName:"",modifiedImg:"",selected:"1",convertedCoordinate:[],isShow:!0}},components:{SelectImg:w,SelectPosition:e("VU/8")(G,y,!1,function(A){e("zcs2")},null,null).exports,Download:e("VU/8")({data:function(){return{mailto:"mailto:arno756@outlook.com"}},props:["modifiedImg","imgName","selecteNav"],methods:{backToStart:function(){this.selecteNav("1")}}},j,!1,function(A){e("lfSJ")},null,null).exports},methods:{setImg:function(A){this.inputImg=A},selecteNav:function(A){this.selected=A},setCoordinate:function(A){this.convertedCoordinate=A},setModifiedImg:function(A){this.modifiedImg=A},setimgName:function(A){this.imgName=A},handle:function(){this.isShow=!this.isShow}}},F={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",[e("mt-swipe",{attrs:{"show-indicators":!1}},[e("mt-swipe-item",[A._v("hi")]),A._v(" "),e("mt-swipe-item",[A._v("2")]),A._v(" "),e("mt-swipe-item",[A._v("3")])],1),A._v(" "),e("mt-navbar",{model:{value:A.selected,callback:function(t){A.selected=t},expression:"selected"}},[e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"1"}},[e("h6",[A._v("1 选照片")])]),A._v(" "),e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"2"}},[e("h6",[A._v("2 选地点")])]),A._v(" "),e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"3"}},[e("h6",[A._v("3 下载成果")])])],1),A._v(" "),e("mt-tab-container",{model:{value:A.selected,callback:function(t){A.selected=t},expression:"selected"}},[e("mt-tab-container-item",{attrs:{id:"1"}},[e("br"),A._v(" "),e("transition",{attrs:{name:"fade"}},[e("SelectImg",{directives:[{name:"show",rawName:"v-show",value:"1"==A.selected,expression:"selected=='1'"}],attrs:{inputImg:A.inputImg,setImg:A.setImg,selecteNav:A.selecteNav,setimgName:A.setimgName}})],1)],1),A._v(" "),e("mt-tab-container-item",{attrs:{id:"2"}},[e("br"),A._v(" "),e("transition",{attrs:{name:"fade"}},[e("SelectPosition",{directives:[{name:"show",rawName:"v-show",value:"2"==A.selected,expression:"selected=='2'"}],attrs:{setCoordinate:A.setCoordinate,selecteNav:A.selecteNav,convertedCoordinate:A.convertedCoordinate,inputImg:A.inputImg,setModifiedImg:A.setModifiedImg}})],1)],1),A._v(" "),e("mt-tab-container-item",{attrs:{id:"3"}},[e("br"),A._v(" "),e("transition",{attrs:{name:"fade"}},[e("Download",{directives:[{name:"show",rawName:"v-show",value:"3"==A.selected,expression:"selected=='3'"}],attrs:{modifiedImg:A.modifiedImg,imgName:A.imgName,selecteNav:A.selecteNav}})],1)],1)],1)],1)},staticRenderFns:[]};var H=e("VU/8")(E,F,!1,function(A){e("5++W")},null,null).exports;_.default.component(g.a.name,g.a),_.default.component(h.a.name,h.a),_.default.component(v.a.name,v.a),_.default.component(m.a.name,m.a),_.default.component(d.a.name,d.a),_.default.component(r.a.name,r.a),_.default.component(s.a.name,s.a),_.default.component(a.a.name,a.a),new _.default({el:"#app",components:{App:H},template:"<App/>"})},UIRh:function(A,t){},XDqQ:function(A,t){},jayP:function(A,t){},joTY:function(A,t){},lfSJ:function(A,t){},swY8:function(A,t){},"y+mr":function(A,t){},zcs2:function(A,t){}},["NHnr"]);