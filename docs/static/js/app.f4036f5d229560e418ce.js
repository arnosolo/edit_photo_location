webpackJsonp([1],{"0dUj":function(A,t){},"5++W":function(A,t){},"8yrI":function(A,t){},Cz6C:function(A,t){},HhZY:function(A,t){},Jic8:function(A,t){A.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkwAAACKCAYAAABYShVDAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAGYktHRAD/AP8A/6C9p5MAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMDoxMDowNSAyMjowMDo1Mlj6g4oAAAFSSURBVHhe7cExAQAAAMKg9U9tDQ8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4VAP0pgABXgq3KAAAAABJRU5ErkJggg=="},Lrbi:function(A,t){},NHnr:function(A,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("UIRh");var a=e("uOA4"),n=e.n(a),i=(e("jayP"),e("QKkm")),s=e.n(i),o=(e("y+mr"),e("3JdW")),c=e.n(o),r=(e("XDqQ"),e("Axha")),d=e.n(r),l=(e("Cz6C"),e("dU8H")),m=e.n(l),v=(e("Lrbi"),e("aMxQ")),u=e.n(v),h=(e("0dUj"),e("IqSH")),f=e.n(h),p=(e("swY8"),e("gAYL")),g=e.n(p),_=e("7+uW"),w={props:["inputImg","setImg","selecteNav","setimgName"],methods:{handleInput:function(A){var t=this,e=A.target.files;this.setimgName(e[0].name);var a=new FileReader;a.readAsDataURL(e[0]),a.onload=function(A){t.setImg(A.target.result),t.selecteNav("2")}}}},b={render:function(){var A=this.$createElement,t=this._self._c||A;return t("div",{staticClass:"box"},[t("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"},on:{change:this.handleInput}}),this._v(" "),t("label",{staticClass:"btn btn-light",attrs:{for:"file"}},[this._v("点我选择图片")]),this._v(" "),t("p",[this._v("选好后自动跳转到位置选择页面.")]),this._v(" "),t("img",{staticClass:"preview rounded mx-auto d-block",attrs:{src:this.inputImg,alt:"preview"}})])},staticRenderFns:[]};var I=e("VU/8")(w,b,!1,function(A){e("HhZY")},null,null).exports,M=e("Milw"),N=e.n(M),S=3.141592653589793,C=6378245,P=.006693421622965943;function x(A,t){if(function(A,t){return A<72.004||A>137.8347||t<.8293||t>55.8271||!1}(A,t))return[A,t];var e=function(A,t){var e=2*A-100+3*t+.2*t*t+.1*A*t+.2*Math.sqrt(Math.abs(A));return e+=2*(20*Math.sin(6*A*S)+20*Math.sin(2*A*S))/3,e+=2*(20*Math.sin(t*S)+40*Math.sin(t/3*S))/3,e+=2*(160*Math.sin(t/12*S)+320*Math.sin(t*S/30))/3}(A-105,t-35),a=function(A,t){var e=300+A+2*t+.1*A*A+.1*A*t+.1*Math.sqrt(Math.abs(A));return e+=2*(20*Math.sin(6*A*S)+20*Math.sin(2*A*S))/3,e+=2*(20*Math.sin(A*S)+40*Math.sin(A/3*S))/3,e+=2*(150*Math.sin(A/12*S)+300*Math.sin(A/30*S))/3}(A-105,t-35),n=t/180*S,i=Math.sin(n);i=1-P*i*i;var s=Math.sqrt(i);return e=180*e/(C*(1-P)/(i*s)*S),[2*A-(A+(a=180*a/(C/s*Math.cos(n)*S))),2*t-(t+e)]}var y=e("mvHQ"),k=e.n(y),U=e("DkUT"),D=e.n(U);var R={props:["selecteNav","setCoordinate","convertedCoordinate","inputImg","setModifiedImg"],data:function(){return{address:""}},methods:{handleClick:function(){var A=this.inputImg,t=this.convertedCoordinate,e=this.setModifiedImg,a=this.selecteNav;e(function(A,t){var e=D.a.load(A);console.log("oldExifObj:"),console.log(e);var a=t[0],n=t[1],i=JSON.parse(k()(e));i.GPS[D.a.GPSIFD.GPSLatitudeRef]=n<0?"S":"N",i.GPS[D.a.GPSIFD.GPSLatitude]=D.a.GPSHelper.degToDmsRational(n),i.GPS[D.a.GPSIFD.GPSLongitudeRef]=a<0?"W":"E",i.GPS[D.a.GPSIFD.GPSLongitude]=D.a.GPSHelper.degToDmsRational(a);var s=D.a.dump(i),o=D.a.insert(s,A),c=D.a.load(o);return console.log("newExifObj"),console.log(c),o}(A,t)),a("3")},backToStart:function(){this.selecteNav("1")}},mounted:function(){var A=this;N.a.load({key:"9c5c51916fc0a4e7e2cf745fb39ffe2c",version:"1.4.15",plugins:[],AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}}).then(function(t){new t.Map("container");AMapUI.loadUI(["misc/PositionPicker"],function(e){var a=new e({mode:"dragMap",map:new t.Map("container",{zoom:16})});a.on("success",function(t){var e=t.position,a=e.lng,n=e.lat;A.address=t.address,A.setCoordinate(x(a,n))}),a.start()})}).catch(function(A){console.log(A)})}},G={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",{staticClass:"box"},[e("a",{staticClass:"btn btn-light",attrs:{href:"javascript:;"},on:{click:A.handleClick}},[A._v("使用当前位置")]),A._v(" "),e("a",{staticClass:"btn btn-light",on:{click:A.backToStart}},[A._v("重选照片")]),A._v(" "),e("p",[A._v("点击后将跳转到完成页面")]),A._v(" "),e("div",{attrs:{id:"container"}}),A._v(" "),e("p",{staticClass:"card-text"},[A._v(A._s(A.address))])])},staticRenderFns:[]};var j={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",{staticClass:"box"},[A.modifiedImg?e("div",[e("p",[A._v("以为照片添加位置信息")])]):e("div",[e("p",[A._v("编辑还未完成")])]),A._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:A.modifiedImg,expression:"modifiedImg"}]},[e("a",{staticClass:"btn btn-light",attrs:{href:A.modifiedImg,download:A.imgName}},[A._v("点我下载")]),A._v(" "),e("a",{staticClass:"btn btn-light",on:{click:A.backToStart}},[A._v("再来一张")]),A._v(" "),e("img",{staticClass:"preview rounded mx-auto d-block",attrs:{src:A.modifiedImg,alt:"modifiedImg"}}),A._v(" "),e("br"),A._v(" "),e("a",{staticClass:"btn btn-light",on:{click:A.switchPayment}},[A._v("向作者投掷两枚硬币")]),A._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:A.showPayment,expression:"showPayment"}]},[e("img",{staticClass:"qrcode",attrs:{src:"static/img/alipay_qrcode.jpeg",alt:"alipay_qrcode"}}),A._v(" "),e("br"),A._v(" "),e("a",{staticClass:"btn btn-light",attrs:{href:A.mailto}},[A._v("联系作者")])])])])},staticRenderFns:[]};var E={data:function(){return{inputImg:e("Jic8"),imgName:"",modifiedImg:"",selected:"1",convertedCoordinate:[],isShow:!0}},components:{SelectImg:I,SelectPosition:e("VU/8")(R,G,!1,function(A){e("zcs2")},null,null).exports,Download:e("VU/8")({data:function(){return{mailto:"mailto:arno756@outlook.com",showPayment:!1}},props:["modifiedImg","imgName","selecteNav"],methods:{backToStart:function(){this.selecteNav("1")},switchPayment:function(){this.showPayment=!this.showPayment}}},j,!1,function(A){e("8yrI")},null,null).exports},methods:{setImg:function(A){this.inputImg=A},selecteNav:function(A){this.selected=A},setCoordinate:function(A){this.convertedCoordinate=A},setModifiedImg:function(A){this.modifiedImg=A},setimgName:function(A){this.imgName=A},handle:function(){this.isShow=!this.isShow}}},F={render:function(){var A=this,t=A.$createElement,e=A._self._c||t;return e("div",[e("mt-swipe",{attrs:{"show-indicators":!1}},[e("mt-swipe-item",[A._v("hi")]),A._v(" "),e("mt-swipe-item",[A._v("2")]),A._v(" "),e("mt-swipe-item",[A._v("3")])],1),A._v(" "),e("mt-navbar",{model:{value:A.selected,callback:function(t){A.selected=t},expression:"selected"}},[e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"1"}},[e("h6",[A._v("1 选照片")])]),A._v(" "),e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"2"}},[e("h6",[A._v("2 选地点")])]),A._v(" "),e("mt-tab-item",{staticStyle:{"text-decoration":"none"},attrs:{id:"3"}},[e("h6",[A._v("3 下载成果")])])],1),A._v(" "),e("mt-tab-container",{model:{value:A.selected,callback:function(t){A.selected=t},expression:"selected"}},[e("mt-tab-container-item",{attrs:{id:"1"}},[e("br"),A._v(" "),e("transition",{attrs:{name:"fade"}},[e("SelectImg",{directives:[{name:"show",rawName:"v-show",value:"1"==A.selected,expression:"selected=='1'"}],attrs:{inputImg:A.inputImg,setImg:A.setImg,selecteNav:A.selecteNav,setimgName:A.setimgName}})],1)],1),A._v(" "),e("mt-tab-container-item",{attrs:{id:"2"}},[e("br"),A._v(" "),e("transition",{attrs:{name:"fade"}},[e("SelectPosition",{directives:[{name:"show",rawName:"v-show",value:"2"==A.selected,expression:"selected=='2'"}],attrs:{setCoordinate:A.setCoordinate,selecteNav:A.selecteNav,convertedCoordinate:A.convertedCoordinate,inputImg:A.inputImg,setModifiedImg:A.setModifiedImg}})],1)],1),A._v(" "),e("mt-tab-container-item",{attrs:{id:"3"}},[e("br"),A._v(" "),e("transition",{attrs:{name:"fade"}},[e("Download",{directives:[{name:"show",rawName:"v-show",value:"3"==A.selected,expression:"selected=='3'"}],attrs:{modifiedImg:A.modifiedImg,imgName:A.imgName,selecteNav:A.selecteNav}})],1)],1)],1)],1)},staticRenderFns:[]};var q=e("VU/8")(E,F,!1,function(A){e("5++W")},null,null).exports;_.default.component(g.a.name,g.a),_.default.component(f.a.name,f.a),_.default.component(u.a.name,u.a),_.default.component(m.a.name,m.a),_.default.component(d.a.name,d.a),_.default.component(c.a.name,c.a),_.default.component(s.a.name,s.a),_.default.component(n.a.name,n.a),new _.default({el:"#app",components:{App:q},template:"<App/>"})},UIRh:function(A,t){},XDqQ:function(A,t){},jayP:function(A,t){},joTY:function(A,t){},swY8:function(A,t){},"y+mr":function(A,t){},zcs2:function(A,t){}},["NHnr"]);